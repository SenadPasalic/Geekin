@using Geekin.ViewModels
@model PostListVM[]
@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers"

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.url.js"></script>

<script>
    //check url with a alert
    //$(document).ready(function () {
    //    var myTitle = location.search.split('myTitle=')[1];
    //    alert(myTitle);
    //    return myTitle;
    //});
    $('.shareDiv a').on('click', function () {
        var type = $(this).prop('type');
        sharePage(type);
    });

    function sharePage(type) {
        var pageUrl = encodeURIComponent("https://jsfiddle.net/anthonyo/b5Ljko3v/");
        var shareUrl;
        switch (type) {
            case 'fb':
                shareUrl = 'https://www.facebook.com/sharer/sharer.php?u=' + pageUrl;
                break;
            case 'tweet':
                shareUrl = 'https://twitter.com/intent/tweet?text=CheckOutMyPage&url=' + pageUrl;
                break;
            case 'gplus':
                shareUrl = 'https://plus.google.com/share?url=' + pageUrl;
                break;
            default:
                return false;
        }
        window.open(shareUrl, ' ', ' width=600, height=500');
    }
</script>

@* Facebook *@
<div id="fb-root"></div>
<script>
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
@* Twitter *@
<script>
    window.twttr = (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
          t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    }(document, "script", "twitter-wjs"));
</script>
@* Google+ *@
<script src="https://apis.google.com/js/platform.js" async defer></script>

<div id="container">
    <div class="myContent">
        @* Om user är admin visa knapp som länkar till addpost tex. *@
        @if (User.IsInRole("Admin"))
        {
            <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#newPost" style="float: right; margin-top: 25px">Nytt inlägg</button>
        }
        @*<center><h2 style="font-weight: 700; color: #555555; text-decoration: underline">Admin posts</h2></center>*@
        @* Skriver ut alla posts *@
        @foreach (var item in Model)
        {
            <h3><b>@item.Title</b></h3>
            @Html.Raw(item.Text)
            @if (@item.Link != null)
                { <br />
                <br />
                <div class="videoWrapper">
                    <iframe width="560" height="314" src="@item.Link" target="_top" allowfullscreen="allowfullscreen"></iframe>
                </div>
            }

            //Get URL path
            //string url = Request.Url.GetLeftPart(UriPartial.Authority);
            //string strPathAndQuery = HttpContext.Current.Request.Url.PathAndQuery;
            //string strPathAndQuery = Request.RawUrl;
            //string url = window.location.href;
            <br />
            <div id="button-panel">
                <div style="color: #999999">Posted @item.TimePosted.ToString("HH:mm dd-MM-yyyy")</div>
            </div>
            <br />
            <div id="share-panel">
                <div style="color: #999999">Share this post</div>
                @*Facebook like and share (data-layout="standard")*@
                <div class="fb-like" data-href="http://keepongeekin.azurewebsites.net/Home/BlogPost?myTitle=@item.Title" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
                @*Twitter*@
                <a class="twitter-share-button socialButton" href="https://twitter.com/intent/tweet?text=KeepOnGeekin.azurewebsites.net" data-size="default">Tweet</a>
                @*Goolge+*@
                <div class="g-plus" data-action="share" data-annotation="bubble"></div>
                <div class="g-plusone"></div>
            </div>

            @*<div class="heartLike">
                    <i class="fa fa-heart" aria-hidden="true" onclick="heartLike(@item.LikeCounter)"></i>
                    <p><a id="likes">@item.LikeCounter</a></p>
                </div>*@
            @*<div>Share this page</div>
                <div class="shareDiv">
                    <a href="#" type="fb">
                        <div class="fa fa-facebook"></div>
                    </a>
                    <a href="#" type="tweet">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a href="#" type="gplus">
                        <i class="fa fa-google-plus"></i>
                    </a>
            </div>*@
            <hr class="style-six">
        }
    </div>
</div>

