@using System.Linq
@using Geekin.ViewModels
@model PostListVM[]
@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers"

@*<script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery.url.js"></script>*@


<div id="container">
    <div class="myContent">
        @* Om user är admin visa knapp som länkar till addpost tex. *@
        @if (User.IsInRole("Admin"))
        {
            <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#newPost" style="float: right; margin-top: 25px">Nytt inlägg</button>
        }
        @*<center><h2 style="font-weight: 700; color: #555555; text-decoration: underline">Admin posts</h2></center>*@


        <center><h2 style="font-weight: 700; color: #555555; text-decoration: underline">@(ViewContext.RouteData.Values["myCategory"])</h2></center>

        @if (!Model.Any())
        {
            <div>
                <img src="~/pictures/comingsoon lunapic.png" />
            </div>

            <br />
            <br />
                <hr class="style-six">
        }
        else
        {
            @* Skriver ut alla posts *@
            @foreach (var item in Model)
            {
                <h3><b>@Html.ActionLink(@item.Title, "BlogPost", "Home", new { myTitle = @item.Id }, null)</b></h3>
                @Html.Raw(item.Text)
                @if (@item.Link != null)
                { <br />
                <br />
                <div class="videoWrapper">
                    <iframe width="560" height="314" src="@item.Link" target="_top" allowfullscreen="allowfullscreen"></iframe>
                </div>
                }

                <br />
                <br />
                <div id="button-panel" style="color: #999999">Posted @item.TimePosted.ToString("HH:mm dd-MM-yyyy")</div>
                <br />
                    <hr class="style-six">
            }
        }
    </div>
</div>