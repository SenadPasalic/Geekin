@using System.Linq
@using Geekin.ViewModels
@model PostListVM[]
@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers"

@{
    // Category will return error if empty
    ViewBag.Title = @Model[0].Category;    
}


<div id="container">
    <div class="myContent">
        <center><h2 style="font-weight: 700; color: #555555; text-decoration: none">@(ViewContext.RouteData.Values["myCategory"])</h2></center>
        <center><h2 style="font-weight: 700; color: #555555; text-decoration: none">@Model[0].Category</h2></center>

        @* Breadcrumb *@
        <ol class="breadcrumb">
            <li><a href="/Home/Index">Home</a></li>
            <li class="active">@Model[0].Category</li>
        </ol>
        

        @if (!Model.Any())
        {
            <div>
                <img src="~/pictures/comingsoon lunapic.png" />
            </div>

            <br />
            <br />
            <hr class="style-six">
        }
        else
        {
            @* Skriver ut alla posts *@
            @foreach (var item in Model)
            {
                <h3><b>@Html.ActionLink(@item.Title, "BlogPost", "Home", new { myTitle = @item.Id }, null)</b></h3>
                @if (item.Text.Length > 300)
                {
                    @Html.Raw(item.Text.Substring(0, 300));
                    <b>
                        @Html.ActionLink(" ... See More", "BlogPost", "Home", new { myTitle = @item.Id }, null)
                    </b>
                }
                else
                {
                    @Html.Raw(item.Text);
                }
                @if (@item.Link != null)
                { <br />
                <br />
                <div class="videoWrapper">
                    <iframe width="560" height="314" src="@item.Link" target="_top" allowfullscreen="allowfullscreen"></iframe>
                </div>
                }

                <br />
                <br />
                <div id="button-panel" style="color: #999999"><i class="fa fa-clock-o" aria-hidden="true"></i> @item.TimePosted.ToString("HH:mm dd-MM-yyyy")</div>
                <br />
                <hr class="style-six">
            }
        }
    </div>
</div>