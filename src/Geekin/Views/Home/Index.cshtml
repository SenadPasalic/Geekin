@using Geekin.ViewModels
@model MasterOneVM
@addTagHelper "*, Microsoft.AspNet.Mvc.TagHelpers"

@{
    ViewBag.Title = "Keep On Geekin'";
}

<script>
    //Heart Like
    var likes = 0;
    function heartLike(likes) {
        likes += 1;
        document.getElementById("likes").innerHTML = likes;
    };
    //Timer Slider
    $(document).ready(function () {
        //Events that reset and restart the timer animation when the slides change
        $("#transition-timer-carousel").on("slide.bs.carousel", function (event) {
            //The animate class gets removed so that it jumps straight back to 0%
            $(".transition-timer-carousel-progress-bar", this)
                .removeClass("animate").css("width", "0%");
        }).on("slid.bs.carousel", function (event) {
            //The slide transition finished, so re-add the animate class so that
            //the timer bar takes time to fill up
            $(".transition-timer-carousel-progress-bar", this)
                .addClass("animate").css("width", "100%");
        });

        //Kick off the initial slide animation when the document is ready
        $(".transition-timer-carousel-progress-bar", "#transition-timer-carousel")
            .css("width", "100%");
    });
    //Bootstrap carousel timer
    $(document).ready(function () {
        $("#transition-timer-carousel").carousel({
            interval: 8000,
            pause: false
        });
    });
</script>

@* Karousel W3C *@
<div class="carousel">
    <br>
    <div id="transition-timer-carousel" class="carousel slide transition-timer-carousel" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#transition-timer-carousel" data-slide-to="0" class="active"></li>
            <li data-target="#transition-timer-carousel" data-slide-to="1"></li>
            <li data-target="#transition-timer-carousel" data-slide-to="2"></li>
            <li data-target="#transition-timer-carousel" data-slide-to="3"></li>
        </ol>

        @{
            var countToFour = 0;

        <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                @foreach (var item in Model.BlogPosts)
                {
                    if (@item.Link != null)
                    {
                        @if (countToFour == 0)
                        {
                            <div class="item active embed-responsive embed-responsive-16by9">
                                <iframe src="@item.Link"></iframe>
                                <div class="carousel-caption">
                                    <h3>@item.Title</h3>
                                    @*<p>The atmosphere in Chania has a touch of Florence and Venice.</p>*@
                                </div>
                            </div>
                        }
                        @if (countToFour != 0)
                        {
                            <div class="item embed-responsive embed-responsive-16by9">
                                <iframe src="@item.Link"></iframe>
                                <div class="carousel-caption">
                                    <h3>@item.Title</h3>
                                    @*<p>The atmosphere in Chania has a touch of Florence and Venice.</p>*@
                                </div>
                            </div>
                        }
                        countToFour++;
                    }
                    if (countToFour == 4)
                    {
                        break;
                    }
                }
            </div>
        }

        @*<div class="item active">
            <img src="img_chania.jpg" alt="Chania" width="460" height="345">
            <div class="carousel-caption">
            <h3>Chania</h3>
            <p>The atmosphere in Chania has a touch of Florence and Venice.</p>
            </div>
            </div>*@


        @* </div> *@

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#transition-timer-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#transition-timer-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
        <!-- Timer "progress bar" -->
        <hr class="transition-timer-carousel-progress-bar animate" />
    </div>
</div>

<div id="containerIndex">
    <div class="myContentLeft">
        @*Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.*@

        @* Skriver ut alla posts *@
        @foreach (var item in Model.BlogPosts)
        {
            @*<h3><b>@item.Title</b></h3>*@
            //<h3><b><a href="/home/blogpost/?myParam=@item.Title">@item.Title</a></b></h3>
            <div class="myLink" title="Title"><h3><b>@Html.ActionLink(@item.Title, "BlogPost", "Home", new { myTitle = @item.Id }, null)</b></h3></div>
            @if (@item.Category != null)
            {
                <div class="categoryLink" title="Category"><h5><b>@Html.ActionLink(@item.Category, "Category", "Home", new { myCategory = @item.Category }, null)</b></h5></div>
            }

            @*<div style="color: #999999"><p>@item.PostedBy</p></div>*@
            <hr />

            @if (item.Text.Length > 300)
            {
                @Html.Raw(item.Text.Substring(0, 300));
                <div class="myLink" title="See more"><b>@Html.ActionLink(" ... See More", "BlogPost", "Home", new { myTitle = @item.Id }, null)</b></div>
            }
            else
            {
                @Html.Raw(item.Text);
            }

            @if (@item.Link != null)
            {
                <br />
                <br />
                //Video
                <div class="videoWrapper">
                    <iframe width="560" height="314" src="@item.Link" target="_top" allowfullscreen="allowfullscreen" frameBorder="0"></iframe>
                </div>
            }
            <br />
            <br />
            //Tags
            @if (item.Tags != null)
            {
                string[] splitTags = item.Tags.Split(null);

                for (int i = 0; i < splitTags.Length; i++)
                {
                    <div class="tag myLink" title="Tag">
                        @Html.ActionLink(splitTags[i], "Tags", "Home", new { myTag = splitTags[i] }, null)
                    </div>
                }
            }
            //Like
            @*<div class="heartLike">
                <i class="fa fa-heart" aria+-hidden="true" onclick="heartLike(@item.LikeCounter)"></i>
                <p><a id="likes">@item.LikeCounter</a></p>
                </div>*@
        <!-- LikeBtn.com BEGIN -->
            @*<span class="btn likebtn-wrapper" data-theme="ublue" data-identifier="item_1"></span>
                <script>(function (d, e, s) { if (d.getElementById("likebtn_wjs")) return; a = d.createElement(e); m = d.getElementsByTagName(e)[0]; a.async = 1; a.id = "likebtn_wjs"; a.src = s; m.parentNode.insertBefore(a, m) })(document, "script", "//w.likebtn.com/js/w/widget.js");</script>*@
        <!-- LikeBtn.com END -->
        <!--Edit/Delete for ADMIN-->
            <br />
            <br />
            @if (Model.IsUserAdmin)
            {
                <div>---------------------------!!!!!!!!!!!!!</div>
            }
            @if (User.Identity.IsAuthenticated)
            {
                <div id="button-panel">
                    <form asp-controller="Home" asp-action="DeleteBlogPost">
                        <input type="hidden" name="postId" value="@item.Id" />
                        <button type="submit" class="btn btn-danger" style="display: inline;"><span class="fa fa-trash"></span></button>
                    </form>
                </div>
                <div id="button-panel">
                    <form asp-controller="Home" asp-action="EditBlogPost">
                        <input type="hidden" name="postId" value="@item.Id" />
                        <button type="submit" class="btn btn-warning" style="display: inline;"><span class="fa fa-pencil"></span></button>
                    </form>
                </div>
            }
            <br />
            <br />
            <div id="button-panel" style="color: #999999"><i class="fa fa-clock-o" aria-hidden="true"></i> @item.TimePosted.ToString("HH:mm dd-MM-yyyy") by @item.PostedBy</div>
            <br />
            <hr class="style-six" style="width:40%">
            <br />
        }
    </div>
    <div class="myContentRight">
        <center><div><i class="fa fa-tags" aria-hidden="true" style="color:cornflowerblue"></i><h4>Featured tags</h4></div></center>
        @{
            List<string[]> splitTags3 = new List<string[]>();
            //List<string[]> allSplitTags = new List<string[]>();            

            string[] splitTags2 = { };

            foreach (var item in Model.BlogPosts)
            {
                @if (item.Tags != null)
                {
                    splitTags2 = item.Tags.Split(null);
                    splitTags3.Add(splitTags2);
                }
            }

            @*

                //string[] sizedTags = { };
                List<string[]> sizedTags = new List<string[]>();
                int m = 0;
                int size = 0;

                for (int i = 0; i < splitTags2.Count; i++)
                {
                    for (int j = 0; j < splitTags2.Count; j++)
                    {
                        for (int k = 0; k < splitTags2[i][k].Length; k++)
                        {
                            for (int l = k + 1; l < splitTags2[i][k].Length; l++)
                            {
                                if (splitTags2[i][k] == splitTags2[j][l])
                                {
                                    sizedTags[m] = splitTags2[i];
                                    m++;
                                }
                            }
                        }
                    }
                }

                for (int i = 0; i < sizedTags.Count; i++)
                {
                    @Html.ActionLink(sizedTags[i] + "  ", "Tags", "Home", new { myTag = sizedTags[i] }, null)
                }*@

            @*for (int i = 0; i < splitTags2.Length; i++)
                {
                    @Html.ActionLink(splitTags2[i] + "  ", "Tags", "Home", new { myTag = splitTags2[i] }, null)
                }*@

        string[][] allSplitTags = splitTags3.ToArray();

        for (int i = 0; i < splitTags3.Count; i++)
        {
            for (int j = 0; j < splitTags3.Count; j++)
            {
                for (int k = 0; k < splitTags3[i].Length; k++)
                {
                    for (int l = 1; l < splitTags3[j].Length; l++)
                    {
                        if (splitTags3[i][k] != splitTags3[j][l])
                        {
                            //allSplitTags[0][m] = splitTags3[j][l];
                            //if (allSplitTags[0][0] != splitTags3[j][l])
                            //{
                                <center>@Html.ActionLink(splitTags3[j][l] + "  ", "Tags", "Home", new { myTag = splitTags3[j][l] }, null)</center>
                            //}                            
                        }
                    }
                }
            }
        }
    }
</div>

</div>